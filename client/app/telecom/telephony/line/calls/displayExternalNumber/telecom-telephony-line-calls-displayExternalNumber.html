<section class="telephony-group-line-displayExternalNumber">

    <header>
        <section-back-link section-back-link-to-state="telecom.telephony.line.calls"
                           section-back-link-title="{{ 'telephony_line_calls_back_link' | translate }}">
        </section-back-link>
        <h1 data-translate="telephony_line_actions_line_calls_display_number_title"></h1>
    </header>

</section>

<bouncing-box-loader data-ng-if="LineDisplayExternalNumberCtrl.isLoading">
    <h1 data-translate="loading"></h1>
</bouncing-box-loader>

<div class="telecom-section-content"
     data-ng-if="!LineDisplayExternalNumberCtrl.isLoading">

    <form class="form-horizontal container-fluid"
          name="displayExternalNumberForm"
          data-ng-submit="LineDisplayExternalNumberCtrl.update()">

        <div class="form-group">

            <div class="row">
                <div class="col-md-6">
                    <p class="text-info">
                        <i class="ovh-font ovh-font-info line-height-normal right-space-m4"></i>
                        <span data-translate="telephony_line_actions_line_calls_display_number_info"></span>
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div flat-input-container>
                        <flat-checkbox class="top-space-m4">
                            <input id="anonymous"
                                name="anonymous"
                                type="checkbox"
                                class="form-control"
                                data-ng-model="LineDisplayExternalNumberCtrl.form.identificationRestriction" />
                        </flat-checkbox>
                        <label for="anonymous"
                            class="service-item left-space-p8 pointer"
                            data-translate="telephony_line_actions_line_calls_identificationRestriction_checkbox_label">
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <div class="col-md-6">
                    <label for="displayExternalNumber"
                           class="control-label"
                           data-translate="telephony_line_actions_line_calls_display_number_label"></label>
                    <p style="font-size: 1.5rem"
                       data-ng-if="LineDisplayExternalNumberCtrl.form.identificationRestriction"
                       data-translate="telephony_line_actions_line_calls_anonymous"></p>
                    <p style="font-size: 1.5rem"
                       data-ng-if="!LineDisplayExternalNumberCtrl.form.identificationRestriction"
                       data-ng-bind="LineDisplayExternalNumberCtrl.form.displayedService"></p>
                    <br />
                    <button type="button"
                            class="btn btn-default no-transition"
                            data-voip-service-choice-popover="{
                                popoverPlacement: 'right auto',
                                popoverClass: 'pretty-popover telephony-service-choice-popover',
                                popoverAppendToBody: true,
                                popoverIsOpen: false
                            }"
                            data-available-types="['sip', 'number', 'trunk', 'fax']"
                            data-ng-show="!LineDisplayExternalNumberCtrl.form.identificationRestriction"
                            data-on-choice-validated="LineDisplayExternalNumberCtrl.onChooseService"
                            data-on-choice-cancel="">
                        <span data-translate="telephony_line_actions_line_calls_display_number_choose"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="form-group top-space-m32">
            <div class="row">
                <div class="col-md-6">
                    <button
                        type="reset"
                        data-translate="cancel"
                        class="btn btn-sm btn-cancel btn-default"
                        data-ng-click="LineDisplayExternalNumberCtrl.reset()"
                        data-ng-disabled="!LineDisplayExternalNumberCtrl.hasChanges() || LineDisplayExternalNumberCtrl.isUpdating">
                    </button>
                    <button type="submit"
                            class="btn btn-sm btn-primary pull-right"
                            data-ng-disabled="!displayExternalNumberForm.$valid || !LineDisplayExternalNumberCtrl.hasChanges() || LineDisplayExternalNumberCtrl.isUpdating">
                        <span data-translate="telephony_line_actions_line_calls_submit_changes"></span>
                        <spinner class="left-space-m8"
                                 data-ng-if="LineDisplayExternalNumberCtrl.isUpdating"></spinner>
                    </button>
                </div>
            </div>
        </div>
    </form>

</div>
